<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MechWarrior 1e Character Sheet - Preview</title>
    <link rel="stylesheet" href="MechWarrior_1e.css">
    <style>
        /* Reset some default browser styles for better preview */
        body {
            margin: 0;
            padding: 0;
            background-color: #2a3a4a;
        }
    </style>
</head>
<body>
    
    
    
    
    
    
    <div class="sheet-mechwarrior">
    <h1 class="sheet-title">MECHWARRIOR</h1>

    <!-- Tab Controls -->
    <input type="radio" name="attr_sheet_tab" class="sheet-tab sheet-tab-character" value="character" id="tab-character" checked="checked" />
    <label for="tab-character" class="sheet-tab-label" data-label="Character Sheet"></label>
    <input type="radio" name="attr_sheet_tab" class="sheet-tab sheet-tab-combat" value="combat" id="tab-combat" />
    <label for="tab-combat" class="sheet-tab-label" data-label="Combat"></label>

    <!-- Character Sheet Tab Content -->
    <div class="sheet-tab-content sheet-tab-character">
    <div class="sheet-character-section">
        <div class="sheet-section-container sheet-angled-panel">
            <!-- Left Column: User Data -->
            <div class="sheet-user-data">
                <h2 class="sheet-section-header">PLAYER DATA</h2>

                <div class="sheet-field-group">
                    <label>NAME</label>
                    <input type="text" name="attr_character_name" />
                </div>

                <div class="sheet-field-group">
                    <label>AGE</label>
                    <input type="text" name="attr_age" />
                </div>

                <div class="sheet-field-group">
                    <label>RANK</label>
                    <input type="text" name="attr_rank" />
                </div>

                <div class="sheet-horizontal-divider"></div>

                <div class="sheet-field-group">
                    <label>TOTAL XP</label>
                    <input type="number" name="attr_total_xp" value="0" />
                </div>

                <div class="sheet-field-group">
                    <label>XP AVAILABLE</label>
                    <input type="number" name="attr_xp_available" value="0" />
                </div>
            </div>

            <!-- Right Column: Warrior Data -->
            <div class="sheet-warrior-data">
                <h2 class="sheet-section-header">WARRIOR DATA</h2>

                <div class="sheet-field-group">
                    <label>BODY</label>
                    <input type="number" name="attr_body" value="6" />
                    <span class="sheet-saving-roll-target">Save: <input type="text" name="attr_body_save" value="(14 - @{body})" disabled="true" /></span>
                </div>

                <div class="sheet-field-group">
                    <label>DEX</label>
                    <input type="number" name="attr_dex" value="6" />
                    <span class="sheet-saving-roll-target">Save: <input type="text" name="attr_dex_save" value="(14 - @{dex})" disabled="true" /></span>
                </div>

                <div class="sheet-field-group">
                    <label>LRN</label>
                    <input type="number" name="attr_lrn" value="6" />
                    <span class="sheet-saving-roll-target">Save: <input type="text" name="attr_lrn_save" value="(14 - @{lrn})" disabled="true" /></span>
                </div>

                <div class="sheet-field-group">
                    <label>CHA</label>
                    <input type="number" name="attr_cha" value="6" />
                    <span class="sheet-saving-roll-target">Save: <input type="text" name="attr_cha_save" value="(14 - @{cha})" disabled="true" /></span>
                </div>

                <div class="sheet-horizontal-divider"></div>

                <div class="sheet-field-group">
                    <label>PIB</label>
                    <input type="number" name="attr_pib" value="0" disabled="true" />
                </div>

                <div class="sheet-field-group">
                    <label>HTK</label>
                    <input type="text" name="attr_htk" value="(@{body} * 10)" disabled="true" />
                </div>

                <div class="sheet-field-group">
                    <label>CURRENT HTK</label>
                    <input type="number" name="attr_current_htk" value="0" />
                </div>
            </div>
        </div>
    </div>

    <!-- Skills Section -->
    <div class="sheet-skills-section">
        <div class="sheet-section-container sheet-angled-panel">
            <div class="sheet-skills-columns">
                <!-- Left Skills Column -->
                <div class="sheet-skills-column">
                    <div class="sheet-skill-header-row">
                        <div class="sheet-skill-header-name">SKILLS</div>
                        <div class="sheet-skill-header-cell">SKILL<br/>LEVEL</div>
                        <div class="sheet-skill-header-cell">ATTRIBUTE<br/>TARGET</div>
                        <div class="sheet-skill-header-cell">MODIFIED SKILL<br/>ROLL TARGET</div>
                    </div>

                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Athletics <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_athletics_level" value="0" />
                        <input type="text" name="attr_athletics_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_athletics_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{athletics_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Aerobatics <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_aerobatics_level" value="0" />
                        <input type="text" name="attr_aerobatics_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_aerobatics_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{aerobatics_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Climbing <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_climbing_level" value="0" />
                        <input type="text" name="attr_climbing_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_climbing_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{climbing_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Equestrian <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_equestrian_level" value="0" />
                        <input type="text" name="attr_equestrian_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_equestrian_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{equestrian_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Running <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_running_level" value="0" />
                        <input type="text" name="attr_running_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_running_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{running_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Swimming <em>(BODY/DEX)</em></div>
                        <input type="number" name="attr_swimming_level" value="0" />
                        <input type="text" name="attr_swimming_attr" value="(14 - floor((@{body} + @{dex}) / 2))" disabled="true" />
                        <input type="text" name="attr_swimming_mod" value="(14 - floor((@{body} + @{dex}) / 2) - @{swimming_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Bow/Blade <em>(DEX)</em></div>
                        <input type="number" name="attr_bow_blade_level" value="0" />
                        <input type="text" name="attr_bow_blade_attr" value="(14 - @{dex})" disabled="true" />
                        <input type="text" name="attr_bow_blade_mod" value="(14 - @{dex} - @{bow_blade_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Brawling <em>(BODY)</em></div>
                        <input type="number" name="attr_brawling_level" value="0" />
                        <input type="text" name="attr_brawling_attr" value="(14 - @{body})" disabled="true" />
                        <input type="text" name="attr_brawling_mod" value="(14 - @{body} - @{brawling_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Computer <em>(LRN)</em></div>
                        <input type="number" name="attr_computer_level" value="0" />
                        <input type="text" name="attr_computer_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_computer_mod" value="(14 - @{lrn} - @{computer_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Diplomacy <em>(CHA)</em></div>
                        <input type="number" name="attr_diplomacy_level" value="0" />
                        <input type="text" name="attr_diplomacy_attr" value="(14 - @{cha})" disabled="true" />
                        <input type="text" name="attr_diplomacy_mod" value="(14 - @{cha} - @{diplomacy_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Driver <em>(DEX)</em></div>
                        <input type="number" name="attr_driver_level" value="0" />
                        <input type="text" name="attr_driver_attr" value="(14 - @{dex})" disabled="true" />
                        <input type="text" name="attr_driver_mod" value="(14 - @{dex} - @{driver_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Engineering <em>(LRN)</em></div>
                        <input type="number" name="attr_engineering_level" value="0" />
                        <input type="text" name="attr_engineering_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_engineering_mod" value="(14 - @{lrn} - @{engineering_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Gunnery/Aerospace <em>(LRN)</em></div>
                        <input type="number" name="attr_gunnery_aerospace_level" value="0" />
                        <input type="text" name="attr_gunnery_aerospace_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_gunnery_aerospace_mod" value="(14 - @{lrn} - @{gunnery_aerospace_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Gunnery/Artillery <em>(LRN)</em></div>
                        <input type="number" name="attr_gunnery_artillery_level" value="0" />
                        <input type="text" name="attr_gunnery_artillery_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_gunnery_artillery_mod" value="(14 - @{lrn} - @{gunnery_artillery_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Gunnery/Mech <em>(DEX)</em></div>
                        <input type="number" name="attr_gunnery_mech_level" value="0" />
                        <input type="text" name="attr_gunnery_mech_attr" value="(14 - @{dex})" disabled="true" />
                        <input type="text" name="attr_gunnery_mech_mod" value="(14 - @{dex} - @{gunnery_mech_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Interrogation <em>(LRN/CHA)</em></div>
                        <input type="number" name="attr_interrogation_level" value="0" />
                        <input type="text" name="attr_interrogation_attr" value="(14 - floor((@{lrn} + @{cha}) / 2))" disabled="true" />
                        <input type="text" name="attr_interrogation_mod" value="(14 - floor((@{lrn} + @{cha}) / 2) - @{interrogation_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Jump/Ship Navigation/Piloting <em>(LRN)</em></div>
                        <input type="number" name="attr_jumpship_level" value="0" />
                        <input type="text" name="attr_jumpship_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_jumpship_mod" value="(14 - @{lrn} - @{jumpship_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Land Management <em>(LRN)</em></div>
                        <input type="number" name="attr_land_mgmt_level" value="0" />
                        <input type="text" name="attr_land_mgmt_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_land_mgmt_mod" value="(14 - @{lrn} - @{land_mgmt_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Leadership <em>(CHA)</em></div>
                        <input type="number" name="attr_leadership_level" value="0" />
                        <input type="text" name="attr_leadership_attr" value="(14 - @{cha})" disabled="true" />
                        <input type="text" name="attr_leadership_mod" value="(14 - @{cha} - @{leadership_level})" disabled="true" />
                    </div>
                </div>

                <!-- Right Skills Column -->
                <div class="sheet-skills-column">
                    <div class="sheet-skill-header-row">
                        <div class="sheet-skill-header-name">SKILLS</div>
                        <div class="sheet-skill-header-cell">SKILL<br/>LEVEL</div>
                        <div class="sheet-skill-header-cell">ATTRIBUTE<br/>TARGET</div>
                        <div class="sheet-skill-header-cell">MODIFIED SKILL<br/>ROLL TARGET</div>
                    </div>

                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Mechanical <em>(LRN)</em></div>
                        <input type="number" name="attr_mechanical_level" value="0" />
                        <input type="text" name="attr_mechanical_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_mechanical_mod" value="(14 - @{lrn} - @{mechanical_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Medical/First Aid <em>(LRN)</em></div>
                        <input type="number" name="attr_medical_level" value="0" />
                        <input type="text" name="attr_medical_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_medical_mod" value="(14 - @{lrn} - @{medical_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Piloting/Aerospace <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_piloting_aerospace_level" value="0" />
                        <input type="text" name="attr_piloting_aerospace_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_piloting_aerospace_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{piloting_aerospace_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Piloting/Mech <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_piloting_mech_level" value="0" />
                        <input type="text" name="attr_piloting_mech_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_piloting_mech_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{piloting_mech_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Pistol <em>(DEX)</em></div>
                        <input type="number" name="attr_pistol_level" value="0" />
                        <input type="text" name="attr_pistol_attr" value="(14 - @{dex})" disabled="true" />
                        <input type="text" name="attr_pistol_mod" value="(14 - @{dex} - @{pistol_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Rifle <em>(DEX)</em></div>
                        <input type="number" name="attr_rifle_level" value="0" />
                        <input type="text" name="attr_rifle_attr" value="(14 - @{dex})" disabled="true" />
                        <input type="text" name="attr_rifle_mod" value="(14 - @{dex} - @{rifle_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Rogue <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_rogue_level" value="0" />
                        <input type="text" name="attr_rogue_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_rogue_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{rogue_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Hide In Cover <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_hide_level" value="0" />
                        <input type="text" name="attr_hide_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_hide_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{hide_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Listen/Eavesdrop <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_listen_level" value="0" />
                        <input type="text" name="attr_listen_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_listen_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{listen_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row sheet-sub-skill">
                        <div class="sheet-skill-name">Stealth <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_stealth_level" value="0" />
                        <input type="text" name="attr_stealth_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_stealth_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{stealth_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Forgery <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_forgery_level" value="0" />
                        <input type="text" name="attr_forgery_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_forgery_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{forgery_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Security Systems <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_security_level" value="0" />
                        <input type="text" name="attr_security_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_security_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{security_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Bribery <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_bribery_level" value="0" />
                        <input type="text" name="attr_bribery_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_bribery_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{bribery_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Disguise <em>(DEX/LRN)</em></div>
                        <input type="number" name="attr_disguise_level" value="0" />
                        <input type="text" name="attr_disguise_attr" value="(14 - floor((@{dex} + @{lrn}) / 2))" disabled="true" />
                        <input type="text" name="attr_disguise_mod" value="(14 - floor((@{dex} + @{lrn}) / 2) - @{disguise_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Streetwise <em>(CHA)</em></div>
                        <input type="number" name="attr_streetwise_level" value="0" />
                        <input type="text" name="attr_streetwise_attr" value="(14 - @{cha})" disabled="true" />
                        <input type="text" name="attr_streetwise_mod" value="(14 - @{cha} - @{streetwise_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Survival <em>(BODY)</em></div>
                        <input type="number" name="attr_survival_level" value="0" />
                        <input type="text" name="attr_survival_attr" value="(14 - @{body})" disabled="true" />
                        <input type="text" name="attr_survival_mod" value="(14 - @{body} - @{survival_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Tactics <em>(LRN)</em></div>
                        <input type="number" name="attr_tactics_level" value="0" />
                        <input type="text" name="attr_tactics_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_tactics_mod" value="(14 - @{lrn} - @{tactics_level})" disabled="true" />
                    </div>
                    <div class="sheet-skill-row">
                        <div class="sheet-skill-name">Technician <em>(LRN)</em></div>
                        <input type="number" name="attr_technician_level" value="0" />
                        <input type="text" name="attr_technician_attr" value="(14 - @{lrn})" disabled="true" />
                        <input type="text" name="attr_technician_mod" value="(14 - @{lrn} - @{technician_level})" disabled="true" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- End Character Sheet Tab -->

    <!-- Combat Tab Content -->
    <div class="sheet-tab-content sheet-tab-combat">
        <p style="color: #c8d0d8; padding: 20px;">Combat section coming soon...</p>
    </div>
    <!-- End Combat Tab -->

</div>

<script>
// Browser JavaScript for MW1e_preview.html
// Simulates Roll20's auto-calc functionality for local testing

document.addEventListener('DOMContentLoaded', function() {
    // Helper function to get attribute value
    function getAttr(name) {
        const input = document.querySelector(`input[name="attr_${name}"]`);
        return parseInt(input?.value || 0);
    }

    // Helper function to set attribute value
    function setAttr(name, value) {
        const input = document.querySelector(`input[name="attr_${name}"]`);
        if (input) input.value = value;
    }

    // Update all calculations
    function updateAll() {
        // Get current attribute values
        const body = getAttr('body');
        const dex = getAttr('dex');
        const lrn = getAttr('lrn');
        const cha = getAttr('cha');

        // Update saving roll targets
        setAttr('body_save', 14 - body);
        setAttr('dex_save', 14 - dex);
        setAttr('lrn_save', 14 - lrn);
        setAttr('cha_save', 14 - cha);

        // Update HTK
        setAttr('htk', body * 10);

        // Update PIB (complex conditionals)
        updatePIB();

        // Update all skills
        updateAllSkills();
    }

    // Update PIB (complex conditional logic)
    function updatePIB() {
        const dex = getAttr('dex');
        const lrn = getAttr('lrn');
        const tacticsLevel = getAttr('tactics_level');
        const leadershipLevel = getAttr('leadership_level');

        let pib = 0;

        // DEX bonuses
        if (dex >= 12) {
            pib += 3;
        } else if (dex >= 10) {
            pib += 2;
        } else if (dex >= 8) {
            pib += 1;
        } else if (dex >= 4) {
            pib -= 1;
        } else if (dex >= 2) {
            pib -= 2;
        }

        // LRN bonuses/penalties
        if (lrn >= 10) {
            pib += 1;
        } else if (lrn >= 2 && lrn <= 5) {
            pib -= 1;
        }

        // Tactics skill bonus: +1 for EACH level
        pib += tacticsLevel;

        // Leadership skill bonus: +1 for each 4 levels
        pib += Math.floor(leadershipLevel / 4);

        setAttr('pib', pib);
    }

    // Skill definitions
    const skills = {
        athletics: ['body', 'dex'], aerobatics: ['body', 'dex'], climbing: ['body', 'dex'],
        equestrian: ['body', 'dex'], running: ['body', 'dex'], swimming: ['body', 'dex'],
        bow_blade: 'dex', brawling: 'body', computer: 'lrn', diplomacy: 'cha', driver: 'dex',
        engineering: 'lrn', gunnery_aerospace: 'lrn', gunnery_artillery: 'lrn', gunnery_mech: 'dex',
        interrogation: ['lrn', 'cha'], jumpship: 'lrn', land_mgmt: 'lrn', leadership: 'cha',
        mechanical: 'lrn', medical: 'lrn', piloting_aerospace: ['dex', 'lrn'], piloting_mech: ['dex', 'lrn'],
        pistol: 'dex', rifle: 'dex', rogue: ['dex', 'lrn'], hide: ['dex', 'lrn'], listen: ['dex', 'lrn'],
        stealth: ['dex', 'lrn'], forgery: ['dex', 'lrn'], security: ['dex', 'lrn'], bribery: ['dex', 'lrn'],
        disguise: ['dex', 'lrn'], streetwise: 'cha', survival: 'body', tactics: 'lrn', technician: 'lrn',
    };

    // Update all skills
    function updateAllSkills() {
        for (const [skillName, attrs] of Object.entries(skills)) {
            const skillLevel = getAttr(`${skillName}_level`);
            let attributeTarget;

            if (Array.isArray(attrs)) {
                const attr1 = getAttr(attrs[0]);
                const attr2 = getAttr(attrs[1]);
                const avgAttr = Math.floor((attr1 + attr2) / 2);
                attributeTarget = 14 - avgAttr;
            } else {
                const attrVal = getAttr(attrs);
                attributeTarget = 14 - attrVal;
            }

            const modifiedTarget = attributeTarget - skillLevel;
            setAttr(`${skillName}_attr`, attributeTarget);
            setAttr(`${skillName}_mod`, modifiedTarget);
        }
    }

    // Add listeners to all attribute inputs
    ['body', 'dex', 'lrn', 'cha'].forEach(attr => {
        const input = document.querySelector(`input[name="attr_${attr}"]`);
        if (input) {
            input.addEventListener('input', updateAll);
            input.addEventListener('change', updateAll);
        }
    });

    // Add listeners to all skill level inputs
    for (const skillName of Object.keys(skills)) {
        const input = document.querySelector(`input[name="attr_${skillName}_level"]`);
        if (input) {
            input.addEventListener('input', updateAll);
            input.addEventListener('change', updateAll);
        }
    }

    // Initialize calculations
    updateAll();
});
</script>






</body>
</html>
