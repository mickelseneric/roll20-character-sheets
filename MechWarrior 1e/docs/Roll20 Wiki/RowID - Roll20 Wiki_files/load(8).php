mw.loader.implement("mediawiki.api",function(){(function(mw,$){var defaultOptions={parameters:{action:'query',format:'json'},ajax:{url:mw.util.wikiScript('api'),timeout:30*1000,dataType:'json'}};mw.Api=function(options){if(options===undefined){options={};}if(options.ajax&&options.ajax.url!==undefined){options.ajax.url=String(options.ajax.url);}options.parameters=$.extend({},defaultOptions.parameters,options.parameters);options.ajax=$.extend({},defaultOptions.ajax,options.ajax);this.defaults=options;};mw.Api.prototype={normalizeAjaxOptions:function(arg){var opts=arg||{};if(typeof arg==='function'){opts={ok:arg};}return opts;},get:function(parameters,ajaxOptions){ajaxOptions=this.normalizeAjaxOptions(ajaxOptions);ajaxOptions.type='GET';return this.ajax(parameters,ajaxOptions);},post:function(parameters,ajaxOptions){ajaxOptions=this.normalizeAjaxOptions(ajaxOptions);ajaxOptions.type='POST';return this.ajax(parameters,ajaxOptions);},ajax:function(parameters,ajaxOptions){var token,
apiDeferred=$.Deferred();parameters=$.extend({},this.defaults.parameters,parameters);ajaxOptions=$.extend({},this.defaults.ajax,ajaxOptions);if(parameters.token){token=parameters.token;delete parameters.token;}ajaxOptions.data=$.param(parameters).replace(/\./g,'%2E');if(token){ajaxOptions.data+='&token='+encodeURIComponent(token);}if(ajaxOptions.ok){apiDeferred.done(ajaxOptions.ok);delete ajaxOptions.ok;}if(ajaxOptions.err){apiDeferred.fail(ajaxOptions.err);delete ajaxOptions.err;}$.ajax(ajaxOptions).fail(function(xhr,textStatus,exception){apiDeferred.reject('http',{xhr:xhr,textStatus:textStatus,exception:exception});}).done(function(result){if(result===undefined||result===null||result===''){apiDeferred.reject('ok-but-empty','OK response but empty result (check HTTP headers?)');}else if(result.error){var code=result.error.code===undefined?'unknown':result.error.code;apiDeferred.reject(code,result);}else{apiDeferred.resolve(result);}});return apiDeferred.promise().fail(function(code,
details){mw.log('mw.Api error: ',code,details);});}};mw.Api.errors=['ok-but-empty','timeout','duplicate','duplicate-archive','noimageinfo','uploaddisabled','nomodule','mustbeposted','badaccess-groups','stashfailed','missingresult','missingparam','invalid-file-key','copyuploaddisabled','mustbeloggedin','empty-file','file-too-large','filetype-missing','filetype-banned','filetype-banned-type','filename-tooshort','illegal-filename','verification-error','hookaborted','unknown-error','internal-error','overwrite','badtoken','fetchfileerror','fileexists-shared-forbidden','invalidtitle','notloggedin'];mw.Api.warnings=['duplicate','exists'];}(mediaWiki,jQuery));;},{},{});mw.loader.implement("mediawiki.user",function(){(function(mw,$){function User(options,tokens){var user,callbacks;user=this;callbacks={};function getUserInfo(info,callback){var api;if(callbacks[info]){callbacks[info].add(callback);return;}callbacks.rights=$.Callbacks('once memory');callbacks.groups=$.Callbacks('once memory');
callbacks[info].add(callback);api=new mw.Api();api.get({action:'query',meta:'userinfo',uiprop:'rights|groups'}).always(function(data){var rights,groups;if(data.query&&data.query.userinfo){rights=data.query.userinfo.rights;groups=data.query.userinfo.groups;}callbacks.rights.fire(rights||[]);callbacks.groups.fire(groups||[]);});}this.options=options||new mw.Map();this.tokens=tokens||new mw.Map();function generateId(){var i,r,id='',seed='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';for(i=0;i<32;i++){r=Math.floor(Math.random()*seed.length);id+=seed.substring(r,r+1);}return id;}this.getName=function(){return mw.config.get('wgUserName');};this.name=function(){return this.getName();};this.isAnon=function(){return user.getName()===null;};this.anonymous=function(){return user.isAnon();};this.sessionId=function(){var sessionId=$.cookie('mediaWiki.user.sessionId');if(typeof sessionId==='undefined'||sessionId===null){sessionId=generateId();$.cookie('mediaWiki.user.sessionId',
sessionId,{'expires':null,'path':'/'});}return sessionId;};this.id=function(){var id,name=user.getName();if(name){return name;}id=$.cookie('mediaWiki.user.id');if(typeof id==='undefined'||id===null){id=generateId();}$.cookie('mediaWiki.user.id',id,{expires:365,path:'/'});return id;};this.bucket=function(key,options){var cookie,parts,version,bucket,range,k,rand,total;options=$.extend({buckets:{},version:0,tracked:false,expires:30},options||{});cookie=$.cookie('mediaWiki.user.bucket:'+key);if(typeof cookie==='string'&&cookie.length>2&&cookie.indexOf(':')>0){parts=cookie.split(':');if(parts.length>1&&Number(parts[0])===options.version){version=Number(parts[0]);bucket=String(parts[1]);}}if(bucket===undefined){if(!$.isPlainObject(options.buckets)){throw'Invalid buckets error. Object expected for options.buckets.';}version=Number(options.version);range=0;for(k in options.buckets){range+=options.buckets[k];}rand=Math.random()*range;total=0;for(k in options.buckets){bucket=k;total+=options.
buckets[k];if(total>=rand){break;}}if(options.tracked){mw.loader.using('jquery.clickTracking',function(){$.trackAction('mediaWiki.user.bucket:'+key+'@'+version+':'+bucket);});}$.cookie('mediaWiki.user.bucket:'+key,version+':'+bucket,{'path':'/','expires':Number(options.expires)});}return bucket;};this.getGroups=function(callback){getUserInfo('groups',callback);};this.getRights=function(callback){getUserInfo('rights',callback);};}mw.user=new User(mw.user.options,mw.user.tokens);}(mediaWiki,jQuery));;},{},{});
/* cache key: roll20-mw_:resourceloader:filter:minify-js:7:c6193420cb3d091bf6010eb41e3aaf32 */